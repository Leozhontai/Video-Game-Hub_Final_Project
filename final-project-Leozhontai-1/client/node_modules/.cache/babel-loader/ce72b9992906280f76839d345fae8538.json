{"ast":null,"code":"import _toConsumableArray from\"C:/Users/leozh/OneDrive/Desktop/GitHub/Hw/Public_Final/Video-Game-Hub_Final_Project/final-project-Leozhontai-1/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/leozh/OneDrive/Desktop/GitHub/Hw/Public_Final/Video-Game-Hub_Final_Project/final-project-Leozhontai-1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/leozh/OneDrive/Desktop/GitHub/Hw/Public_Final/Video-Game-Hub_Final_Project/final-project-Leozhontai-1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/leozh/OneDrive/Desktop/GitHub/Hw/Public_Final/Video-Game-Hub_Final_Project/final-project-Leozhontai-1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{supabase}from'../client.js';import{useParams}from\"react-router-dom\";import{Link}from'react-router-dom';import Posted from'../components/Posted.jsx';import more from'../components/more.png';import'./DetailView.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetailView=function DetailView(_ref){var data=_ref.data;var _useParams=useParams(),id=_useParams.id;var _useState=useState(data.filter(function(item){return item.id==id;})[0]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(post.upvotes),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),comments=_useState8[0],setComments=_useState8[1];var updateCount=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from('hub').update({upvotes:count+1}).eq('id',id);case 2:// Update State Variable\nsetCount(function(count){return count+1;});case 3:case\"end\":return _context.stop();}}},_callee);}));return function updateCount(_x){return _ref2.apply(this,arguments);};}();var handleCommentSubmit=function handleCommentSubmit(e){e.preventDefault();setComments([].concat(_toConsumableArray(comments),[comment]));setComment('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"DetailView\",children:[/*#__PURE__*/_jsx(Posted,{created_at:post.created_at}),/*#__PURE__*/_jsx(Link,{to:'/'+id+'/edit',children:/*#__PURE__*/_jsx(\"img\",{className:\"moreButton\",alt:\"edit button\",src:more})}),/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:post.content}),/*#__PURE__*/_jsx(\"img\",{className:\"image_url\",src:post.image_url}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"button\",{className:\"betButton\",onClick:updateCount,children:[\"\\uD83D\\uDC4D Upvote: \",count]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCommentSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:comment,onChange:function onChange(e){return setComment(e.target.value);},placeholder:\"Add a comment\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),comments.map(function(comment,index){return/*#__PURE__*/_jsx(\"p\",{children:comment},index);})]});};export default DetailView;","map":{"version":3,"names":["React","useState","supabase","useParams","Link","Posted","more","DetailView","data","id","filter","item","post","setPost","upvotes","count","setCount","comment","setComment","comments","setComments","updateCount","event","from","update","eq","handleCommentSubmit","e","preventDefault","created_at","title","content","image_url","target","value","map","index"],"sources":["C:/Users/leozh/OneDrive/Desktop/GitHub/Hw/Public_Final/Video-Game-Hub_Final_Project/final-project-Leozhontai-1/client/src/pages/DetailView.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { supabase } from '../client.js'\nimport { useParams } from \"react-router-dom\"\nimport { Link } from 'react-router-dom'\nimport Posted from '../components/Posted.jsx'\nimport more from '../components/more.png'\nimport './DetailView.css'\n\nconst DetailView = ({data}) => {\n  const {id} = useParams();    \n  const [post, setPost] = useState(data.filter(item => item.id == id)[0]);\n  const [count, setCount] = useState(post.upvotes)\n  const [comment, setComment] = useState('');\n  const [comments, setComments] = useState([]);\n\n  const updateCount = async (event) => {\n    await supabase\n    .from('hub')\n    .update({ upvotes: count + 1})\n    .eq('id', id)\n\n    // Update State Variable\n    setCount((count) => count + 1);\n  }\n\n  const handleCommentSubmit = e => {\n    e.preventDefault();\n    setComments([...comments, comment]);\n    setComment('');\n  };\n\n  return(\n    <div className='DetailView'>\n        <Posted created_at={post.created_at} />\n        <Link to={'/'+ id + '/edit'}><img className=\"moreButton\" alt=\"edit button\" src={more} /></Link>\n\n        <h2 className=\"title\">{post.title}</h2> \n\n        <p className=\"content\">{post.content}</p>\n        <img className=\"image_url\" src={post.image_url} />\n        <br></br>\n\n        <button className=\"betButton\" onClick={updateCount} >üëç Upvote: {count}</button>\n\n        <form onSubmit={handleCommentSubmit}>\n          <input type=\"text\" value={comment} onChange={e => setComment(e.target.value)} placeholder=\"Add a comment\" />\n          <button type=\"submit\">Submit</button>\n        </form>\n\n        {comments.map((comment, index) => (\n          <p key={index}>{comment}</p>\n        ))}\n    </div>\n  ); \n};\n\nexport default DetailView;"],"mappings":"o0BAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,OAAP,KAAmB,0BAAnB,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,MAAO,kBAAP,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAAY,IAAVC,KAAU,MAAVA,IAAU,CAC7B,eAAaL,SAAS,EAAtB,CAAOM,EAAP,YAAOA,EAAP,CACA,cAAwBR,QAAQ,CAACO,IAAI,CAACE,MAAL,CAAY,SAAAC,IAAI,QAAIA,KAAI,CAACF,EAAL,EAAWA,EAAf,EAAhB,EAAmC,CAAnC,CAAD,CAAhC,wCAAOG,IAAP,eAAaC,OAAb,eACA,eAA0BZ,QAAQ,CAACW,IAAI,CAACE,OAAN,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eACA,eAA8Bf,QAAQ,CAAC,EAAD,CAAtC,yCAAOgB,OAAP,eAAgBC,UAAhB,eACA,eAAgCjB,QAAQ,CAAC,EAAD,CAAxC,yCAAOkB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,YAAW,6FAAG,iBAAOC,KAAP,0IACZpB,SAAQ,CACbqB,IADK,CACA,KADA,EAELC,MAFK,CAEE,CAAEV,OAAO,CAAEC,KAAK,CAAG,CAAnB,CAFF,EAGLU,EAHK,CAGF,IAHE,CAGIhB,EAHJ,CADY,QAMlB;AACAO,QAAQ,CAAC,SAACD,KAAD,QAAWA,MAAK,CAAG,CAAnB,EAAD,CAAR,CAPkB,sDAAH,kBAAXM,YAAW,6CAAjB,CAUA,GAAMK,oBAAmB,CAAG,QAAtBA,oBAAsB,CAAAC,CAAC,CAAI,CAC/BA,CAAC,CAACC,cAAF,GACAR,WAAW,8BAAKD,QAAL,GAAeF,OAAf,GAAX,CACAC,UAAU,CAAC,EAAD,CAAV,CACD,CAJD,CAMA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACI,KAAC,MAAD,EAAQ,UAAU,CAAEN,IAAI,CAACiB,UAAzB,EADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAE,IAAKpB,EAAL,CAAU,OAApB,uBAA6B,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAC,aAAhC,CAA8C,GAAG,CAAEH,IAAnD,EAA7B,EAFJ,cAII,WAAI,SAAS,CAAC,OAAd,UAAuBM,IAAI,CAACkB,KAA5B,EAJJ,cAMI,UAAG,SAAS,CAAC,SAAb,UAAwBlB,IAAI,CAACmB,OAA7B,EANJ,cAOI,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEnB,IAAI,CAACoB,SAArC,EAPJ,cAQI,aARJ,cAUI,gBAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAEX,WAAvC,mCAAiEN,KAAjE,GAVJ,cAYI,cAAM,QAAQ,CAAEW,mBAAhB,wBACE,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAET,OAA1B,CAAmC,QAAQ,CAAE,kBAAAU,CAAC,QAAIT,WAAU,CAACS,CAAC,CAACM,MAAF,CAASC,KAAV,CAAd,EAA9C,CAA8E,WAAW,CAAC,eAA1F,EADF,cAEE,eAAQ,IAAI,CAAC,QAAb,oBAFF,GAZJ,CAiBKf,QAAQ,CAACgB,GAAT,CAAa,SAAClB,OAAD,CAAUmB,KAAV,qBACZ,mBAAgBnB,OAAhB,EAAQmB,KAAR,CADY,EAAb,CAjBL,GADF,CAuBD,CA9CD,CAgDA,cAAe7B,WAAf"},"metadata":{},"sourceType":"module"}